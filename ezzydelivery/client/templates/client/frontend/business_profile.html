{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block extra_css %}
<style>
    ul.instafeed {
        list-style: none;
        display: flex;
        overflow-x: auto;
        overflow-y: hidden;
        padding-bottom: 2rem;
    }

    li.instafeed {
        flex: 0 0 45vw;
        max-width: 18rem;
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        left: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        height: 20rem;
    }

    li.instafeed span {
        position: absolute;
        top: 0;
        left: 0;
        display: block;
        padding: 0.75em;
        height: 100%;
        writing-mode: vertical-lr;
        text-align: center;
        transform: rotate(180deg);
    }

    li.instafeed::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 0%;
        transform: translate(0%, -50%);
        height: 100%;
        width: 100%;
        background-image: linear-gradient(to right, #f44336 cc 2%, transparent 60%);
        z-index: -1;
    }

    li.instafeed img {
        display: block;
        height: 20rem;
        width: 100%;
        object-fit: cover;
        position: absolute;
        top: 50%;
        left: 0;
        transform: translate(0%, -50%);
        z-index: -2;
    }

    @media (min-width: 53rem) {
        li.instafeed:nth-child(1) {
            left: 0rem;
        }

        li.instafeed:nth-child(2) {
            left: 2.2rem;
        }

        li.instafeed:nth-child(3) {
            left: 4.4rem;
        }

        li.instafeed:nth-child(4) {
            left: 6.6rem;
        }

        li.instafeed:nth-child(5) {
            left: 8.8rem;
        }

        li.instafeed:nth-child(6) {
            left: 11rem;
        }

        li.instafeed:nth-child(7) {
            left: 13.2rem;
        }

        li.instafeed:nth-child(8) {
            left: 15.4rem;
        }

        li.instafeed:nth-child(9) {
            left: 17.6rem;
        }

        li.instafeed:nth-child(10) {
            left: 19.8rem;
        }

        li.instafeed:nth-child(11) {
            left: 22rem;
        }

        li.instafeed:nth-child(12) {
            left: 24.2rem;
        }

        li.instafeed:nth-child(13) {
            left: 26.4rem;
        }

        li.instafeed:nth-child(14) {
            left: 28.6rem;
        }

        li.instafeed:nth-child(15) {
            left: 30.8rem;
        }
    }
</style>
{% endblock extra_css %}
{% block title %}
BUSINESS {{ business.business_name }}
{% endblock title %}
{% block content %}
{% if request.user.id == business.business_id %}
<div class="d-flex justify-content-end px-3  bg-light">
    <h3 class=" w-100 m-2  ">BUSINESS Profile</h3>
    <a type="submit" class="btn btn-dark m-2  w-25 "
        href="{% url 'business:business_profile_update' business.business_id %}">Update
        Info</a>
    <!-- Button trigger modal -->
    <button type="button " class="btn btn-dark m-2 w-25 " data-bs-toggle="modal" data-bs-target="#exampleModal">
        Update
        Photo
    </button>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Logo Update</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">{% include "client/parts/business_logo_update.html" %}</div>
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="d-flex justify-content-end px-3 m-3 bg-light">
    <h2 class=" text-center fw-bolder w-100 my-3">Business Profile</h2>
</div>
{% endif %}
<!--frontend business Profile page section -->
<section class="section about-section my-3" id="about">
    <div class="container">
        <div class="row align-items-s flex-row-reverse my-4 h-50">
            <div class="col-md-6 px-5 px-md-2">
                <div class="about-text go-to">
                    <div class="text-center py-3 bg-light rounded-3  p-0 m-0">
                        <h2>{{ business.business_name }}</h2>
                    </div>
                    <br>
                    <div class="row about-list pt-3 p-0 m-0">
                        <div class="col-6">
                            <div class="media">
                                <i class="fa-solid fa-layer-group pe-2"></i>
                                <label>Category</label>
                                <p class="ms-4">{{ business.business_product_category }}</p>
                            </div>
                            <div class="media">
                                <i class="fa-brands fa-product-hunt pe-2"></i>
                                <label>Brands</label>
                                <p class="ms-4">{{ business.products.brand_name }}</p>
                            </div>
                            <div class="media">
                                <i class="fa-solid fa-location-dot pe-2"></i>
                                <label>Address</label>
                                <p class="ms-4">{{ business.address }}</p>
                            </div>
                            <div class="media">
                                <i class="fa-solid fa-phone pe-2"></i>
                                <label>Phone</label>
                                <p class="ms-4">{{ business.business_phone }}</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="media">
                                <i class="fa-solid fa-envelope pe-2 "></i>{{ business.business_email }}
                                <p class="ms-4"></p>
                            </div>
                            <div class="media">
                                <i class="fa-solid fa-person-running pe-2"></i><label>Since</label>
                                <p class="ms-4">{{ business.business_since }}</p>
                            </div>
                            <div class="media">
                                <i class="fa-solid fa-shop pe-2"></i>
                                <label>Store Location</label>
                                <a href="{% url 'business:pickup_location_list' %}"><i
                                        class="fa-solid fa-location-plus"></i></a>
                                {% for loc in location %}
                                <p class="p-0 m-0 ms-4 ps-1">{{ forloop.counter }}: {{ loc }}</p>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="text-center py-3 bg-light rounded-3 ">
                        <p class="mb-2">Intro : {{ business.business_bio }}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6  mb-3">
                <div class=" img p-3">
                    {% if business_logo %}
                    <img src="{{ business_logo }}" alt="" class=" text-center img-thumbnail" />
                    {% else %}
                    <img src="/media/business/avatar.png" title="" alt="" class="img-thumbnail text-center" />
                    {% endif %}
                </div>
                <div class="d-flex justify-content-evenly p-3 bg-light">
                    <a href="https://www.facebook.com/{{ business.business_facebook_page }}" target="_blank"><i
                            class="fa-brands fa-facebook fa-2xl me-3 text-dark  "></i></a>
                    <a href="https://wa.me/974{{ business.business_whatsapp }}" target="_blank"><i
                            class="fa-brands fa-whatsapp fa-2xl me-3 text-dark"></i></a>
                    <a href="https://www.instagram.com/{{ business.business_instagram }}" target="_blank"><i
                            class="fa-brands fa-instagram fa-2xl text-dark"></i></a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6 col-lg-3">
                <div class="count-data text-center">
                    <h6 class="count h3" data-to="500" data-speed="500">200</h6>
                    <p class="m-0px font-w-600">Tasks Listed</p>
                </div>
            </div>
            <div class="col-6 col-lg-3">
                <div class="count-data text-center">
                    <h6 class="count h3" data-to="150" data-speed="150">170</h6>
                    <p class="m-0px font-w-600">Tasks Completed</p>
                </div>
            </div>
            <div class="col-6 col-lg-3">
                <div class="count-data text-center">
                    <h6 class="count h3" data-to="850" data-speed="850">2</h6>
                    <p class="m-0px font-w-600">Products</p>
                </div>
            </div>
            <div class="col-6 col-lg-3">
                <div class="count-data text-center">
                    <h6 class="count h3" data-to="190" data-speed="190">68 (M)</h6>
                    <p class="m-0px font-w-600">Running</p>
                </div>
            </div>
            <div class="row py-3">
                <div class="media">

                    <div id="instafeed-container">
                        <h3 class=" flex-fill bg-light p-2 rounded-3 fw-bolder">Instagram Feed</h3>

                        <ul class="p-0 instafeed">
                            <li class="instafeed"> <img src="
                        https://source.unsplash.com/ezSFnAFi9hY/500x500" alt="cut citrus fruits. " />
                                <span>Lorem Ipsum</span>
                            </li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/TIGDsyy0TK4/500x500"
                                    alt="sliced mango. " />
                                <span>Dolor Sit</span>
                            </li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/TdDtTu2rv4s/500x500"
                                    alt="a bunch of blueberries. " /><span>Amet
                                    Consectetur</span></li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/eudGUrDdBB0/500x500"
                                    alt="a pineapple sitting on a table. " /><span>Adipiscing Elit</span></li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/eJH4f1rlG7g/500x500"
                                    alt="frozen raspberries. " /><span>Nunc
                                    Tortor</span></li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/24RUrLSW1HI/500x500"
                                    alt="a sliced strawberry. " /><span>Metus
                                    Mollis</span></li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/h5yMpgOI5nI/500x500"
                                    alt="an arrangement of assorted sliced fruits. " /><span>Congue Sagittis</span></li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/2TYrR2IB72s/500x500"
                                    alt="sliced watermelons. " /><span>Vestibulum
                                    Et</span></li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/1cWZgnBhZRs/500x500"
                                    alt="grapefruits, lemons, and pomegranates. " /><span>Donec Eget</span></li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/9aOswReDKPo/500x500"
                                    alt="half of an avocado. " /><span>Maecenas et
                                    Justo</span></li>
                            <li class="instafeed"> <img src="https://source.unsplash.com/Nl7eLS8E2Ss/500x500"
                                    alt="half of a lime. " /><span>Malesuada Quam</span>
                            </li>

                        </ul>
                    </div>
                    <script
                        src="https://cdn.jsdelivr.net/gh/stevenschobert/instafeed.js@2.0.0rc1/src/instafeed.min.js"></script>
                    <script type="text/javascript">
                        var userFeed = new Instafeed({
                            get: 'user',
                            target: "instafeed-container",
                            resolution: 'low_resolution',
                            accessToken: '{{instakey}}'
                        });
                        userFeed.run();

                    </script>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}